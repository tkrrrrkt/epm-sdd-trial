# v0 CLI çµ±åˆã‚¬ã‚¤ãƒ‰ - EPM SaaSé–‹ç™º

v0.dev ã§ç”Ÿæˆã—ãŸUIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’ã€CLIçµŒç”±ã§ãƒ­ãƒ¼ã‚«ãƒ«ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã«è‡ªå‹•å–å¾—ã™ã‚‹ãŸã‚ã®å®Œå…¨ã‚¬ã‚¤ãƒ‰

---

## ğŸ“š å‰æçŸ¥è­˜: v0 CLI ã®åŸºæœ¬ã‚³ãƒãƒ³ãƒ‰

v0 å…¬å¼CLIã¯ã€ç”Ÿæˆã•ã‚ŒãŸã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’ãƒ­ãƒ¼ã‚«ãƒ«ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã«çµ±åˆã™ã‚‹ãŸã‚ã®æ¨™æº–ãƒ„ãƒ¼ãƒ«ã§ã™ã€‚

### åˆ©ç”¨å¯èƒ½ãªã‚³ãƒãƒ³ãƒ‰

```bash
# v0 ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã«è¿½åŠ 
npx v0 add [component_url_or_id]

# ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®åˆæœŸåŒ– (v0çµ±åˆã®æº–å‚™)
npx v0 init

# ãƒ—ãƒ­ãƒ€ã‚¯ã‚·ãƒ§ãƒ³ãƒ“ãƒ«ãƒ‰
npx v0 build

# Vercel ã¸ã®ãƒ‡ãƒ—ãƒ­ã‚¤
npx v0 deploy
```

**é‡è¦**: `npx v0 add` ã¯ã€v0.dev ã§ç”Ÿæˆã—ãŸã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®URLã¾ãŸã¯IDã‚’æŒ‡å®šã—ã¦ã€**è‡ªå‹•çš„ã«ãƒ­ãƒ¼ã‚«ãƒ«ã® `components/` ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«é…ç½®**ã—ã¾ã™ã€‚

---

## ğŸ¯ EPM ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ã® v0 CLI ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—

### Step 1: ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆåˆæœŸåŒ–

```bash
cd /Users/ktkrr/root/10_dev/epm-sdd-trial/apps/web

# v0 CLI ã®åˆæœŸåŒ– (shadcn/ui ã¨ã®çµ±åˆ)
npx v0 init
```

**æœŸå¾…ã•ã‚Œã‚‹å‹•ä½œ**:
- `components.json` ãŒä½œæˆã¾ãŸã¯æ›´æ–°ã•ã‚Œã‚‹
- v0 ãŒä½¿ç”¨ã™ã‚‹ shadcn/ui ã®è¨­å®šãŒé©ç”¨ã•ã‚Œã‚‹
- EPM Design System Registry ã®å‚ç…§è¨­å®šãŒè¿½åŠ ã•ã‚Œã‚‹

---

## ğŸ”„ v0 ç”Ÿæˆã‚³ãƒ¼ãƒ‰ã®å–å¾—ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼

### ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼å…¨ä½“åƒ

```
[1. v0.dev ã§UIç”Ÿæˆ]
    â†“ (ç”Ÿæˆå®Œäº†å¾Œã€URLã‚’ã‚³ãƒ”ãƒ¼)
[2. npx v0 add <url>] â†’ è‡ªå‹•ã§ãƒ­ãƒ¼ã‚«ãƒ«ã«é…ç½®
    â†“
[3. _v0_drop ã«æ•´ç†] â†’ éš”é›¢ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã¸ç§»å‹•
    â†“
[4. Cursor ã§ç¢ºèªãƒ»èª¿æ•´]
    â†“
[5. features ã¸çµ±åˆ]
```

---

## ğŸ“ å®Ÿè·µä¾‹: Employee Master ã® UIç”Ÿæˆã‹ã‚‰çµ±åˆã¾ã§

### 1. v0.dev ã§ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆç”Ÿæˆ

**v0 ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆä¾‹**:

```markdown
Use the EPM Design System from: https://epm-registry-6xtkaywr0-tkoizumi-hira-tjps-projects.vercel.app

Create an Employee List page with:
- Data table showing employee information (id, name, email, department, hireDate)
- Search input for filtering
- "Add Employee" button (Deep Teal primary color)
- Edit/Delete action buttons per row
- Pagination component at bottom

Props interface:
```typescript
interface EmployeeListProps {
  employees: Array<{
    id: string
    name: string
    email: string
    department: string
    hireDate: string
  }>
  onSearch: (query: string) => void
  onAdd: () => void
  onEdit: (id: string) => void
  onDelete: (id: string) => void
  currentPage: number
  totalPages: number
  onPageChange: (page: number) => void
}
```

Requirements:
- NO API calls, NO backend logic
- Use MockBffClient for data
- Pure presentation component
- Output to: apps/web/_v0_drop/master-data/employee-master/src
- Use EPM Tier 1 components: Table, Input, Button, Pagination, Dialog
```

### 2. v0 CLI ã§ãƒ­ãƒ¼ã‚«ãƒ«ã«å–å¾—

ç”Ÿæˆå®Œäº†å¾Œã€v0.dev ã®ç”»é¢ã‹ã‚‰ **Share â†’ Copy URL** ã§ä»¥ä¸‹ã®ã‚ˆã†ãªURLã‚’å–å¾—:

```
https://v0.dev/chat/abc123xyz
```

ãƒ­ãƒ¼ã‚«ãƒ«ã§å®Ÿè¡Œ:

```bash
cd /Users/ktkrr/root/10_dev/epm-sdd-trial/apps/web

# v0 ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’è¿½åŠ 
npx v0 add "https://v0.dev/chat/abc123xyz"
```

**ä½•ãŒèµ·ã“ã‚‹ã‹**:
1. v0 CLI ãŒæŒ‡å®šã•ã‚ŒãŸãƒãƒ£ãƒƒãƒˆã‹ã‚‰æœ€æ–°ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’å–å¾—
2. å¿…è¦ãªä¾å­˜ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ (Radix UI ãªã©) ã‚’è‡ªå‹•ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
3. `src/components/ui/` ã¾ãŸã¯ `src/components/` ã«é…ç½®
4. shadcn/ui ã®è¨­å®šã«åŸºã¥ã„ã¦ãƒ‘ã‚¹ã‚’è‡ªå‹•èª¿æ•´

### 3. _v0_drop ã«æ•´ç† (CCSDD ãƒ«ãƒ¼ãƒ«æº–æ‹ )

v0 CLI ã¯æ¨™æº–ã® `components/` ã«é…ç½®ã™ã‚‹ãŸã‚ã€CCSDD ã®éš”é›¢ãƒ«ãƒ¼ãƒ«ã«å¾“ã£ã¦ `_v0_drop` ã«ç§»å‹•:

```bash
# v0 ãŒç”Ÿæˆã—ãŸãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç¢ºèª
ls -la src/components/

# _v0_drop ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’æº–å‚™
mkdir -p apps/web/_v0_drop/master-data/employee-master/src/components

# ç”Ÿæˆã•ã‚ŒãŸãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç§»å‹•
mv src/components/employee-list.tsx \
   apps/web/_v0_drop/master-data/employee-master/src/components/

# ãã®ä»–ã®é–¢é€£ãƒ•ã‚¡ã‚¤ãƒ«ã‚‚ç§»å‹• (page.tsx, api/, types/ ãªã©)
# v0 ãŒç”Ÿæˆã—ãŸãƒ•ã‚¡ã‚¤ãƒ«ãƒ„ãƒªãƒ¼ã«å¿œã˜ã¦èª¿æ•´
```

### 4. OUTPUT.md ã‚’ä½œæˆ (æ‰‹å‹•ã¾ãŸã¯Cursorã§)

v0 CLI ã¯ OUTPUT.md ã‚’è‡ªå‹•ç”Ÿæˆã—ãªã„ãŸã‚ã€Cursor ã«ä¾é ¼ã—ã¦ä½œæˆ:

```bash
# Cursor ã§é–‹ã
cursor apps/web/_v0_drop/master-data/employee-master/src/
```

**Cursor ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆ**:

```
Review the files in this directory that were generated by v0.
Create an OUTPUT.md file following the template in .kiro/steering/v0-prompt-template.md.

Include:
1. Generated files tree
2. Key imports and dependencies
3. Missing Shared Components (TODO)
4. Migration notes (_v0_drop â†’ features)
5. Constraint compliance checklist
```

---

## ğŸ¤– è‡ªå‹•åŒ–ã‚¹ã‚¯ãƒªãƒ—ãƒˆ: v0-fetch.sh

æ‰‹å‹•ã§ã®ç§»å‹•ã¨OUTPUT.mdä½œæˆã‚’è‡ªå‹•åŒ–ã™ã‚‹ã‚·ã‚§ãƒ«ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’ä½œæˆ:

```bash
#!/bin/bash
# v0-fetch.sh - v0ç”Ÿæˆã‚³ãƒ¼ãƒ‰ã‚’å–å¾—ã—ã¦_v0_dropã«æ•´ç†

set -e

# å¼•æ•°ãƒã‚§ãƒƒã‚¯
if [ $# -lt 2 ]; then
  echo "Usage: ./scripts/v0-fetch.sh <v0_url> <context>/<feature>"
  echo "Example: ./scripts/v0-fetch.sh 'https://v0.dev/chat/abc123' master-data/employee-master"
  exit 1
fi

V0_URL="$1"
FEATURE_PATH="$2"
CONTEXT=$(echo "$FEATURE_PATH" | cut -d'/' -f1)
FEATURE=$(echo "$FEATURE_PATH" | cut -d'/' -f2)

echo "ğŸ“¦ Fetching v0 component from: $V0_URL"
echo "ğŸ¯ Target: $FEATURE_PATH"

# v0 CLI ã§ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆè¿½åŠ 
cd apps/web
npx v0 add "$V0_URL"

# _v0_drop ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªä½œæˆ
TARGET_DIR="_v0_drop/$FEATURE_PATH/src"
mkdir -p "$TARGET_DIR"/{components,api,types}

# ç”Ÿæˆã•ã‚ŒãŸãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç§»å‹•
# (v0ãŒç”Ÿæˆã—ãŸæœ€æ–°ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç‰¹å®šã—ã¦ç§»å‹•)
LATEST_COMPONENT=$(ls -t src/components/*.tsx | head -1)
if [ -f "$LATEST_COMPONENT" ]; then
  echo "âœ… Moving component: $LATEST_COMPONENT"
  mv "$LATEST_COMPONENT" "$TARGET_DIR/components/"
fi

# page.tsx ãªã©ã®é–¢é€£ãƒ•ã‚¡ã‚¤ãƒ«ã‚‚ç§»å‹• (å­˜åœ¨ã™ã‚‹å ´åˆ)
if [ -f "src/app/page.tsx" ]; then
  mv src/app/page.tsx "$TARGET_DIR/"
fi

# api/ ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãŒã‚ã‚Œã°ç§»å‹•
if [ -d "src/api" ]; then
  mv src/api/* "$TARGET_DIR/api/"
fi

echo "âœ… Files moved to: $TARGET_DIR"

# OUTPUT.md ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆä½œæˆ
cat > "$TARGET_DIR/OUTPUT.md" << 'EOF'
# v0 Generated Output - [FEATURE_NAME]

## 1) Generated files (tree)

\`\`\`
[TODO: Add file tree]
\`\`\`

## 2) Key imports / dependency notes

- @/shared/ui: [List components used]
- @contracts/bff/[context]/[feature]: [List DTO types]
- BffClient: [Describe interface]

## 3) Missing Shared Component / Pattern (TODO)

- [ ] [Component 1] (apps/web/src/shared/ui/components/[name].tsx)
- [ ] [Component 2]

## 4) Migration notes (_v0_drop â†’ features)

1. Implement missing shared components first
2. Create @/shared/ui barrel export
3. Move src/ to apps/web/src/features/$CONTEXT/$FEATURE
4. Update imports to use @/shared/ui
5. Replace mock DTOs with @contracts/bff imports
6. Register route in apps/web/src/app/$CONTEXT/$FEATURE/page.tsx
7. Add menu entry in apps/web/src/shared/navigation/menu.ts

## 5) Constraint compliance checklist

- [ ] Code written ONLY under apps/web/_v0_drop/$CONTEXT/$FEATURE/src
- [ ] UI components imported ONLY from @/shared/ui
- [ ] DTO types imported from packages/contracts/src/bff
- [ ] No imports from packages/contracts/src/api
- [ ] No Domain API direct calls (/api/)
- [ ] No direct fetch() outside api/HttpBffClient.ts
- [ ] No layout.tsx generated
- [ ] No base UI components created under features
- [ ] No raw color literals (bg-[#...], etc.)
- [ ] No new sidebar/header/shell created inside the feature
EOF

echo "âœ… OUTPUT.md template created"
echo ""
echo "ğŸ‰ v0 component successfully fetched!"
echo "ğŸ“‚ Location: apps/web/$TARGET_DIR"
echo ""
echo "Next steps:"
echo "1. Review and update OUTPUT.md"
echo "2. Implement missing shared components (Cursor)"
echo "3. Move to features/ directory"
echo "4. Update imports and integrate with BFF"

cd ../..
```

### ã‚¹ã‚¯ãƒªãƒ—ãƒˆã®ä½¿ã„æ–¹

```bash
# å®Ÿè¡Œæ¨©é™ã‚’ä»˜ä¸
chmod +x scripts/v0-fetch.sh

# å®Ÿè¡Œ
./scripts/v0-fetch.sh "https://v0.dev/chat/abc123xyz" master-data/employee-master
```

---

## ğŸ” ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

### å•é¡Œ 1: `npx v0 add` ãŒå¤±æ•—ã™ã‚‹

**ç—‡çŠ¶**: "Component not found" ã¾ãŸã¯èªè¨¼ã‚¨ãƒ©ãƒ¼

**è§£æ±ºç­–**:
```bash
# v0 ã«ãƒ­ã‚°ã‚¤ãƒ³
npx v0 login

# Vercel ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã§èªè¨¼
# ãƒ–ãƒ©ã‚¦ã‚¶ãŒé–‹ãã®ã§ã€Vercel ã§ãƒ­ã‚°ã‚¤ãƒ³

# å†åº¦ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆè¿½åŠ ã‚’è©¦è¡Œ
npx v0 add "https://v0.dev/chat/abc123xyz"
```

### å•é¡Œ 2: ä¾å­˜ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãŒä¸è¶³ã—ã¦ã„ã‚‹

**ç—‡çŠ¶**: `@radix-ui/react-dialog` ãªã©ã®ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ãŒè¦‹ã¤ã‹ã‚‰ãªã„

**è§£æ±ºç­–**:
```bash
# v0 CLI ãŒè‡ªå‹•ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ãªã‹ã£ãŸå ´åˆã€æ‰‹å‹•è¿½åŠ 
pnpm add @radix-ui/react-dialog @radix-ui/react-separator @radix-ui/react-tabs
```

### å•é¡Œ 3: EPM Design System ãŒé©ç”¨ã•ã‚Œã¦ã„ãªã„

**ç—‡çŠ¶**: Deep Teal/Royal Indigo ãŒåæ˜ ã•ã‚Œãšã€ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã‚«ãƒ©ãƒ¼

**è§£æ±ºç­–**:
1. v0 ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã®å†’é ­ã« Registry URL ã‚’è¨˜è¼‰ã—ãŸã‹ç¢ºèª
2. `globals.css` ãŒ EPM ç‰ˆã«æ›´æ–°ã•ã‚Œã¦ã„ã‚‹ã‹ç¢ºèª:
   ```bash
   cat apps/web/src/app/globals.css | grep "primary-500"
   # oklch(0.52 0.13 195) ãŒè¡¨ç¤ºã•ã‚Œã‚‹ã¯ãš
   ```

---

## ğŸ“Š v0 CLI vs æ‰‹å‹•ã‚³ãƒ”ãƒ¼ã®æ¯”è¼ƒ

| é …ç›® | v0 CLI | æ‰‹å‹•ã‚³ãƒ”ãƒ¼ |
|------|--------|-----------|
| **é€Ÿåº¦** | âš¡ æ•°ç§’ | ğŸŒ æ•°åˆ† |
| **æ­£ç¢ºæ€§** | âœ… ä¾å­˜é–¢ä¿‚ã‚‚è‡ªå‹• | âš ï¸ æ¼ã‚Œã®ãƒªã‚¹ã‚¯ |
| **ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç†** | âœ… URL ã§ç®¡ç† | âŒ ç®¡ç†å›°é›£ |
| **æ›´æ–°è¿½å¾“** | âœ… å†å®Ÿè¡Œã§æœ€æ–°å–å¾— | âŒ æ‰‹å‹•å†ã‚³ãƒ”ãƒ¼ |
| **å­¦ç¿’ã‚³ã‚¹ãƒˆ** | ä½ (ã‚³ãƒãƒ³ãƒ‰1ã¤) | ä½ (ã‚³ãƒ”ãƒšã®ã¿) |

**æ¨å¥¨**: v0 CLI ã®ä½¿ç”¨

---

## ğŸ“ ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹

### 1. ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆURLã®ç®¡ç†

v0 ã§ç”Ÿæˆã—ãŸã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®URLã‚’ã€ä»•æ§˜æ›¸ã«è¨˜éŒ²:

```markdown
<!-- .kiro/specs/master-data/employee-master/design.md -->

## UI Components

- Employee List: https://v0.dev/chat/abc123xyz (v0-generated 2025-01-19)
- Employee Form: https://v0.dev/chat/def456uvw (v0-generated 2025-01-20)
```

### 2. v0-fetch.sh ã®æ‹¡å¼µ

ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®æˆé•·ã«åˆã‚ã›ã¦ã€ã‚¹ã‚¯ãƒªãƒ—ãƒˆã«ä»¥ä¸‹ã‚’è¿½åŠ :
- Cursor ã«ã‚ˆã‚‹ OUTPUT.md è‡ªå‹•ç”Ÿæˆ
- Git ã¸ã®è‡ªå‹•ã‚³ãƒŸãƒƒãƒˆ
- Slack/Teams ã¸ã®é€šçŸ¥

### 3. Cursor ã¨ã®é€£æº

```bash
# v0 å–å¾—å¾Œã€å³åº§ã« Cursor ã§ç¢ºèª
./scripts/v0-fetch.sh "https://v0.dev/chat/abc123" master-data/employee-master
cursor apps/web/_v0_drop/master-data/employee-master/src/
```

---

## ğŸš€ å®Œå…¨ãªçµ±åˆãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ (CLIç‰ˆ)

```bash
# 1. v0.dev ã§UIç”Ÿæˆ (ãƒ–ãƒ©ã‚¦ã‚¶)
# ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã« EPM Registry URL ã‚’å«ã‚ã‚‹

# 2. URL ã‚’ã‚³ãƒ”ãƒ¼ (ä¾‹: https://v0.dev/chat/abc123xyz)

# 3. ãƒ­ãƒ¼ã‚«ãƒ«ã§å–å¾—
./scripts/v0-fetch.sh "https://v0.dev/chat/abc123xyz" master-data/employee-master

# 4. OUTPUT.md ã‚’ç¢ºèªãƒ»æ›´æ–° (Cursor)
cursor apps/web/_v0_drop/master-data/employee-master/src/OUTPUT.md

# 5. Missing Components å®Ÿè£… (Cursor)
cursor apps/web/src/shared/ui/components/

# 6. features ã¸ç§»è¡Œ
mv apps/web/_v0_drop/master-data/employee-master/src \
   apps/web/src/features/master-data/employee-master

# 7. Imports ä¿®æ­£ (Cursor)
# "Update all imports to use @/shared/ui and @contracts/bff"

# 8. Route ç™»éŒ²
mkdir -p apps/web/src/app/master-data/employee-master
echo "import Page from '@/features/master-data/employee-master/page'; export default Page;" \
  > apps/web/src/app/master-data/employee-master/page.tsx

# 9. ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
pnpm dev
```

---

## ğŸ“š å‚è€ƒè³‡æ–™

- v0 å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ: https://v0.dev/docs
- shadcn CLI ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹: https://ui.shadcn.com/docs/cli
- EPM Design System Registry: https://epm-registry-6xtkaywr0-tkoizumi-hira-tjps-projects.vercel.app
- CCSDD Development Process: `.kiro/steering/development-process.md`
